<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>happy bday p</title>
  <link rel="icon" href="images/IMG_8313.jpeg" type="image/x-icon">
  <style>
    
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: "Arial", sans-serif;
      cursor: url('images/cursor-icon-pixel-art-isolated-on-white-background-free-vector.cur'), auto;
    }

    #desktop {
      position: relative;
      width: 100vw;
      height: 100vh;
      z-index: 0;
    }

    #desktop::before {
      content: "";
      position: absolute;
      inset: 0;
      background: url('images/background.png');
      background-repeat: repeat;
      background-size: auto;
      background-position: 0% 0%;
      animation: moveBg 30s linear infinite;
      z-index: -2;
    }

    #desktop::after {
      content: "";
      position: absolute;
      inset: 0;
      background: red;
      animation: rgbShift 20s linear infinite;
      mix-blend-mode: hue;
      z-index: -1;
      pointer-events: none;
    }



    @keyframes moveBg {
      0% { background-position: 0% 0%; }
      100% { background-position: 100% 100%; }
    }

    @keyframes moveBg {
  0% { background-position: 0% 0%; }
  100% { background-position: 100% 100%; }
    }

    @keyframes rgbShift {
      0%   { background-color: red; }
      25%  { background-color: green; }
      50%  { background-color: blue; }
      75%  { background-color: magenta; }
      100% { background-color: red; }
    }


    .icon, .folder-icon {
      position: absolute;
      width: 80px;
      text-align: center;
      cursor: move;
      user-select: none;
      z-index: 1;
    }

  .icon:active, .folder-icon:active, .window:active {
    cursor: url('images/360_F_713226313_k4zS1m3qJDlKxa52QpsSt19mOjgMcxVh.cur'), grabbing;
    }


    .icon img, .folder-icon img {
      width: 48px;
      height: 48px;
    }

    .window {
      position: absolute;
      background: white;
      border: 2px solid black;
      box-shadow: 5px 5px 0 #000;
      display: none;
      z-index: 10;
      opacity: 0;
      transform: scale(0.95);
      transition: opacity 0.2s ease, transform 0.2s ease;
    }

    .window.show {
      display: block;
      opacity: 1;
      transform: scale(1);
    }

    .title-bar {
      background: #0078D7;
      color: white;
      padding: 4px;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: move;
      box-sizing: border-box;
      width: 100%;
    }

    .title-bar img {
      width: 16px;
      height: 16px;
      cursor: pointer;
      margin-left: 4px;
    }

    .window-content {
      padding: 16px;
      display: flex;
      flex-wrap: wrap;
      gap: 24px;
      justify-content: flex-start;
    }



    .file {
      width: 80px;
      text-align: center;
      cursor: pointer;
    }

    #audio-player {
      position: absolute;
      top: 10px;
      left: 400px;
      width: 500px;
      background: #bcbcbc;
      border: 2px solid black;
      color: yellow;
      font-family: "Arial", sans-serif;
      z-index: 10;
      box-shadow: 4px 4px 0 #333;
      cursor: default;
    }

    #audio-player .track-input {
      width: 100%;
      padding: 8px;
      font-size: 14px;
      background: white;
      border: 2px inset #aaa;
      margin-bottom: 10px;
      box-sizing: border-box;
    }

    .volume-control {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
    }

    .volume-control .slider {
      flex-grow: 1;
    }

    .controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      padding: 0 8px 10px;
    }

    .controls button {
      width: 60px;
      height: 40px;
      font-size: 20px;
      background: white;
      border: 2px outset #ddd;
      cursor: pointer;
    }

    .controls .timer {
      background: white;
      color: black;
      font-weight: bold;
      font-size: 20px;
      padding: 6px 12px;
      border: 2px inset #222;
    }

    .img-window {
      width: auto;
      max-width: 500px;
    }

    .img-window img {
      display: block;
      max-width: 100%;
      height: auto;
    }
  </style>
</head>
<body>
  <div id="desktop">
<!-- Left Column Cluster -->
<div class="icon" style="top: 180px; left: 40px;" ondblclick="selectTrack('music/Birthday Boy.mp3')">
  <img src="images/6849c43e870f2cd8dd1f03cf_Icon=Music, State=Main.svg">
  <div>BirthdayBoy.mp3</div>
</div>

<div class="icon" style="top: 230px; left: 80px;" ondblclick="selectTrack('music/break me down.mp3')">
  <img src="images/6849c43e870f2cd8dd1f03cf_Icon=Music, State=Main.svg">
  <div>breakmedown.mp3</div>
</div>

<div class="icon" style="top: 260px; left: 20px;" ondblclick="selectTrack('music/Fire And Desire.mp3')">
  <img src="images/6849c43e870f2cd8dd1f03cf_Icon=Music, State=Main.svg">
  <div>FireAndDesire.mp3</div>
</div>

<div class="icon" style="top: 320px; left: 100px;" ondblclick="selectTrack('music/I Love How You Love Me (Live).mp3')">
  <img src="images/6849c43e870f2cd8dd1f03cf_Icon=Music, State=Main.svg">
  <div>ILoveHowYouLoveMe.mp3</div>
</div>

<div class="icon" style="top: 370px; left: 30px;" ondblclick="selectTrack('music/Playing It Cool.mp3')">
  <img src="images/6849c43e870f2cd8dd1f03cf_Icon=Music, State=Main.svg">
  <div>PlayingItCool.mp3</div>
</div>

<div class="icon" style="top: 410px; left: 65px;" ondblclick="selectTrack('music/Skincare.mp3')">
  <img src="images/6849c43e870f2cd8dd1f03cf_Icon=Music, State=Main.svg">
  <div>Skincare.mp3</div>
</div>

<div class="icon" style="top: 460px; left: 10px;" ondblclick="selectTrack('music/So Much Love So Little Time.mp3')">
  <img src="images/6849c43e870f2cd8dd1f03cf_Icon=Music, State=Main.svg">
  <div>SoMuchLoveSoLittleTime.mp3</div>
</div>

<!-- Right Column Cluster -->
<div class="icon" style="top: 200px; left: 85vw;" ondblclick="selectTrack('music/You Know Im Down.mp3')">
  <img src="images/6849c43e870f2cd8dd1f03cf_Icon=Music, State=Main.svg">
  <div>YouKnowImDown.mp3</div>
</div>

<div class="icon" style="top: 250px; left: 83vw;" ondblclick="selectTrack('music/Fknow It.mp3')">
  <img src="images/6849c43e870f2cd8dd1f03cf_Icon=Music, State=Main.svg">
  <div>FknowIt.mp3</div>
</div>

<div class="icon" style="top: 300px; left: 88vw;" ondblclick="selectTrack('music/King of Carrot Flowers Pts. 2 & 3.mp3')">
  <img src="images/6849c43e870f2cd8dd1f03cf_Icon=Music, State=Main.svg">
  <div>KingOfCarrotFlowers.mp3</div>
</div>

<div class="icon" style="top: 360px; left: 86vw;" ondblclick="selectTrack('music/Ooo La La.mp3')">
  <img src="images/6849c43e870f2cd8dd1f03cf_Icon=Music, State=Main.svg">
  <div>OooLaLa.mp3</div>
</div>

<div class="icon" style="top: 400px; left: 82vw;" ondblclick="selectTrack('music/Sweet Trip - Noise Is A Social Skill.mp3')">
  <img src="images/6849c43e870f2cd8dd1f03cf_Icon=Music, State=Main.svg">
  <div>NoiseIsASocialSkill.mp3</div>
</div>

<div class="icon" style="top: 440px; left: 89vw;" ondblclick="selectTrack('music/Trailblaze â˜†.mp3')">
  <img src="images/6849c43e870f2cd8dd1f03cf_Icon=Music, State=Main.svg">
  <div>Trailblazeâ˜†.mp3</div>
</div>

<div class="icon" style="top: 480px; left: 87vw;" ondblclick="selectTrack('music/Unknown Mortal Orchestra - ï½¢So Good at Being in Troubleï½£ (Official Audio).mp3')">
  <img src="images/6849c43e870f2cd8dd1f03cf_Icon=Music, State=Main.svg">
  <div>SoGoodAtBeingInTrouble.mp3</div>
</div>

<!-- Folder Icon -->
<div class="folder-icon" style="top: 50px; left: 150px;" onclick="openWindow('misc')">
  <img src="images/6849c43ec145979a248d76be_Icon=Folder, State=Main.svg">
  <div>Misc</div>
</div>

  </div>

  <!-- Move these two out of #desktop -->
  <!-- Audio Player Control -->
  <div id="audio-player">
    <div class="title-bar">
      <span>ðŸ”Š Audio Player</span>
    </div>  
    <div style="padding: 10px;">
      <input type="text" id="track-name" class="track-input" placeholder="Select track to listen" readonly>
      <div class="volume-control">
        <img src="images/685998439ec0c3d1ecd6df7d_Frame 30.svg" alt="Speaker" style="width: 20px; margin-right: 10px;">
        <input type="range" id="volume-slider" class="slider" min="0" max="1" step="0.01" value="0.8">
      </div>
      <div class="controls">
        <button onclick="playAudio()"><img src="images/684b108ff274ab04de6b4100_Frame 21.svg" alt="Play" style="width: 20px;"></button>
        <button onclick="pauseAudio()"><img src="images/684b1f963f006f0bb2f8461c_Frame 23.svg" alt="Pause" style="width: 20px;"></button>
        <button onclick="stopAudio()"><img src="images/684b24427bebfb2ebba14e78_Frame 25.svg" alt="Stop" style="width: 20px;"></button>
        <div class="timer" id="timer">0:00</div>
      </div>
      <audio id="player" src=""></audio>
    </div>
  </div>

  <!-- Misc Folder Window -->
  <div class="window" id="misc-window" style="top: 100px; left: 100px; width: 600px; height: 360px;">
    <div class="title-bar">
      <span>Misc</span>
      <div>
        <img src="images/6855ae1b039eae8c0b01bfb9_Minimize.svg" alt="_">
        <img src="images/6855ae1bd5b91d941de54428_Maximize.svg" alt="[ ]">
        <img src="images/6855bd93cc3a014a0df5359a_Close.svg" alt="X" onclick="closeWindow('misc')">
      </div>
    </div>
    <div class="window-content">
      <div class="file" onclick="createImageViewer('new_photo1.jpg', 'images/IMG_1374.jpeg')">
        <img src="images/IMG_1374.jpeg" width="64"><br>
        last day in sego.jpg
      </div>
      <div class="file" onclick="createImageViewer('new_photo2.png', 'images/IMG_5980.jpeg')">
        <img src="images/IMG_5980.jpeg" width="64"><br>
        grass.png
      </div>
      <div class="file" onclick="createImageViewer('new_photo3.jpg', 'images/IMG_6962.jpeg')">
        <img src="images/IMG_6962.jpeg" width="64"><br>
        halloween.jpg
      </div>
      <div class="file" onclick="createImageViewer('new_photo4.jpg', 'images/7EFD9562-A3FC-4C45-A451-8F0F9198E9CA.jpeg')">
        <img src="images/7EFD9562-A3FC-4C45-A451-8F0F9198E9CA.jpeg" width="64"><br>
        playground.jpg
      </div>    
      <!-- Video -->
      <div class="file" onclick="createVideoViewer('images/filtered-FCD0F3A0-0421-4029-B595-CE04E4D761BB.mp4')">
        <img src="images/video_thumbnail.png" width="64" height="48"><br>
        classic.mp4
      </div>
      <!-- Text file -->
      <div class="file" onclick="openTextFile('README.txt')">
        <img src="images/6849c43e184329d1de5e2527_Icon=Note, State=Main.svg" width="48"><br>
        README.txt
      </div>
    </div>
  </div>


<script>
  let zIndexCounter = 100;
  const player = document.getElementById('player');
  const trackName = document.getElementById('track-name');
  const timerDisplay = document.getElementById('timer');
  const volumeSlider = document.getElementById('volume-slider');

  volumeSlider.addEventListener('input', () => {
    player.volume = volumeSlider.value;
  });

  player.addEventListener('timeupdate', () => {
    const minutes = Math.floor(player.currentTime / 60);
    const seconds = Math.floor(player.currentTime % 60).toString().padStart(2, '0');
    timerDisplay.textContent = `${minutes}:${seconds}`;
  });

  function selectTrack(file) {
    player.src = file;
    trackName.value = file.split('/').pop().replace(/\.[^/.]+$/, '').replace(/\s+/g, '') + '.mp3';
    player.play();
  }

  function playAudio() {
    player.play();
  }

  function pauseAudio() {
    player.pause();
  }

  function stopAudio() {
    player.pause();
    player.currentTime = 0;
  }

  function getMaxZIndex() {
    let max = 100;
    document.querySelectorAll('.window, #audio-player').forEach(el => {
      const z = parseInt(window.getComputedStyle(el).zIndex) || 0;
      if (z > max) max = z;
    });
    return max;
  }

  function openWindow(name) {
    const win = document.getElementById(`${name}-window`);
    win.classList.add("show");
    win.style.display = 'block';
    zIndexCounter = getMaxZIndex() + 1;
    win.style.zIndex = zIndexCounter;
  }

  function closeWindow(name) {
    const win = document.getElementById(`${name}-window`);
    win.classList.remove("show");
    setTimeout(() => win.style.display = 'none', 200);
  }

  function pixelateImage(imgElement, scale = 0.1) {
  const original = new Image();
  original.src = imgElement.src;

  original.onload = () => {
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');

    // Downscale
    const width = original.width * scale;
    const height = original.height * scale;
    canvas.width = width;
    canvas.height = height;
    ctx.imageSmoothingEnabled = false;
    ctx.drawImage(original, 0, 0, width, height);

    // Upscale back
    const upscaleCanvas = document.createElement('canvas');
    const upscaleCtx = upscaleCanvas.getContext('2d');
    upscaleCanvas.width = original.width;
    upscaleCanvas.height = original.height;
    upscaleCtx.imageSmoothingEnabled = false;
    upscaleCtx.drawImage(canvas, 0, 0, width, height, 0, 0, original.width, original.height);

    imgElement.src = upscaleCanvas.toDataURL();
  };
}

  function createImageViewer(title, src) {
    const viewer = document.createElement('div');
    viewer.className = 'window img-window show';
    viewer.style.top = `${150 + Math.random() * 100}px`;
    viewer.style.left = `${150 + Math.random() * 100}px`;
    viewer.style.maxWidth = '500px';
    zIndexCounter = getMaxZIndex() + 1;
    viewer.style.zIndex = zIndexCounter;

    const titleBar = document.createElement('div');
    titleBar.className = 'title-bar';
    titleBar.innerHTML = `<span>${title}</span><div><img src="images/6855bd93cc3a014a0df5359a_Close.svg" alt="X" onclick="this.closest('.window').remove()"></div>`;

    const img = document.createElement('img');
    img.src = src;
    img.alt = title;
    img.style.width = '100%';

    viewer.appendChild(titleBar);
    viewer.appendChild(img);
    document.body.appendChild(viewer);
    makeDraggable(viewer);

    // â†“â†“â†“ Add this line
    pixelateImage(img, 0.08);
}


  function createVideoViewer(videoSrc) {
    const viewer = document.createElement('div');
    viewer.className = 'window show';
    viewer.style.top = `${100 + Math.random() * 100}px`;
    viewer.style.left = `${100 + Math.random() * 100}px`;
    viewer.style.width = '480px';
    viewer.style.height = '300px';
    zIndexCounter = getMaxZIndex() + 1;
    viewer.style.zIndex = zIndexCounter;

    const titleBar = document.createElement('div');
    titleBar.className = 'title-bar';
    titleBar.innerHTML = `<span>${videoSrc}</span><div><img src="images/6855bd93cc3a014a0df5359a_Close.svg" alt="X" onclick="this.closest('.window').remove()"></div>`;

    const video = document.createElement('video');
    video.src = videoSrc;
    video.controls = true;
    video.style.width = '100%';
    video.style.height = 'calc(100% - 30px)';
    video.style.background = '#000';

    viewer.appendChild(titleBar);
    viewer.appendChild(video);
    document.body.appendChild(viewer);
    makeDraggable(viewer);
  }

  function openTextFile(filePath) {
    fetch(filePath)
      .then(response => response.text())
      .then(text => {
        const viewer = document.createElement('div');
        viewer.className = 'window show';
        viewer.style.top = `${120 + Math.random() * 100}px`;
        viewer.style.left = `${120 + Math.random() * 100}px`;
        viewer.style.width = '400px';
        viewer.style.height = '300px';
        zIndexCounter = getMaxZIndex() + 1;
        viewer.style.zIndex = zIndexCounter;

        const titleBar = document.createElement('div');
        titleBar.className = 'title-bar';
        titleBar.innerHTML = `<span>${filePath}</span><div><img src="images/6855bd93cc3a014a0df5359a_Close.svg" alt="X" onclick="this.closest('.window').remove()"></div>`;

        const content = document.createElement('pre');
        content.textContent = text;
        content.style.padding = '10px';
        content.style.whiteSpace = 'pre-wrap';
        content.style.margin = '0';
        viewer.appendChild(titleBar);
        viewer.appendChild(content);
        document.body.appendChild(viewer);
        initializeDraggables();

      });
  }

  function makeDraggable(el) {
    let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
    const header = el.querySelector('.title-bar') || el;
    header.onmousedown = dragMouseDown;

    function dragMouseDown(e) {
      e.preventDefault();
      pos3 = e.clientX;
      pos4 = e.clientY;
      document.onmouseup = closeDragElement;
      document.onmousemove = elementDrag;
      zIndexCounter = getMaxZIndex() + 1;
      el.style.zIndex = zIndexCounter;
    }

    function elementDrag(e) {
      e.preventDefault();
      pos1 = pos3 - e.clientX;
      pos2 = pos4 - e.clientY;
      pos3 = e.clientX;
      pos4 = e.clientY;
      el.style.top = (el.offsetTop - pos2) + "px";
      el.style.left = (el.offsetLeft - pos1) + "px";
    }

    function closeDragElement() {
      document.onmouseup = null;
      document.onmousemove = null;
    }
  }

  function initializeDraggables() {
  document.querySelectorAll('.icon, .folder-icon, .window, #audio-player').forEach(el => {
    if (!el.classList.contains('draggable')) {
      makeDraggable(el);
      el.classList.add('draggable');
    }
  });
}

initializeDraggables(); // run once on page load


  document.addEventListener('mousedown', (e) => {
    const win = e.target.closest('.window');
    if (win) {
      zIndexCounter = getMaxZIndex() + 1;
      win.style.zIndex = zIndexCounter;
    }
    // Bring audio player to front if clicked
    const audioPlayer = document.getElementById('audio-player');
    if (audioPlayer && (audioPlayer === e.target || audioPlayer.contains(e.target))) {
      zIndexCounter = getMaxZIndex() + 1;
      audioPlayer.style.zIndex = zIndexCounter;
    }
  });


</script>


  </div>
</body>
</html>
